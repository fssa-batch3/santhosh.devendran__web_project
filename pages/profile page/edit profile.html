<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="../../assets/css/font style.css"/>
        <title>edit profile</title>
        <link rel="stylesheet" href="../../assets/css/profile css/edit profile.css"/>
    </head>
    <body>
        <!-- header -->

        <div class="center">

            <div class="profile_photo">
                <div class="cover_img">
                    <img alt="cover photo" src="../../assets/img/user/cover img/profile back cover.jpg" width="100%" height="200px"/>
                    <input class="profile" type="file"/>
                    <i class="fa fa-camera" aria-hidden="true"></i>
                </div>
                <div class="dp">
                    <img alt="profile image" src="../../assets/img/user/DS profile img.jpg" width="130px" height="130px"/>
                    <input class="profile" type="file"/>
                    <i class="fa fa-camera" aria-hidden="true"></i>
                </div>
            </div>
            <form onsubmit="ubdate(event)">
            <div class="data_change">
                
                    <input class="name" type="email" id="email" placeholder="new mail id"/>
                <input class="bio" type="txt" id="bio" placeholder="Bio"/>
                <input class="mobile_number" id="mobile_number" type="tel" placeholder="mobile number"/> 
               
                               
            </div>
            <div class="submit">
                    <div class="sb">
                        <button type="submit">Submit</button>
                    </div>
            </div>
        </form>
        </div>

        <script>
            let unic_user_id = JSON.parse(localStorage.getItem("user_id"));

if(unic_user_id==""){
    window.location.href = "../../index.html";
}


const params = new URLSearchParams(window.location.search);
        const user_Id = params.get('user_id');

            let unic_id= JSON.parse(localStorage.getItem("user_id"));
            let user_records=JSON.parse(localStorage.getItem("user_list"))

            
            function login_data(e){
                return e.user_name == unic_id;
            }
            let user_data = user_records.find(login_data);

            document.getElementById("email").innerHTML=user_data["email"];
            document.getElementById("bio").innerHTML=user_data["user_bio"];
            document.getElementById("mobile_number").innerHTML=user_data["mobile_number"];


            function ubdate(e){
                e.preventDefault();
         
            let email=document.getElementById("email").value;
            let user_bio=document.getElementById("bio").value;
            let mobile_number=document.getElementById("mobile_number").value;

            user_data["email"]=email;
            user_data["user_bio"]=user_bio;
            user_data["mobile_number"]=mobile_number;

            localStorage.setItem("user_list",JSON.stringify(user_records));
            alert("updated successfully");

            window.location.href = "./profile.html?user_id=" + user_Id;

        }




        </script>



    </body>

    <script src="../assets/js/header.js"></script>
</html>